<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø¯Ù…ÛŒÙ†ÛŒ</title>
    
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vazirmatn Font from Google Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@300;400;500;600;700&display=swap">
    
    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <style>
        /* Custom CSS Classes */
        .bg-app {
            background-color: #ffffff;
        }
        .text-app {
            color: #000000;
        }
        .border-app {
            border-color: #000000;
        }
        .bg-input {
            background-color: #fafafa;
        }
        .btn-primary {
            background-color: #000000;
            color: #ffffff;
        }
        .btn-primary:hover {
            background-color: #333333;
        }
        .en-text {
            font-family: "Times New Roman", serif;
            font-weight: bold;
        }
        
        /* Apply Vazirmatn font to all Persian text */
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        
        /* Custom focus styles */
        input:focus {
            --tw-ring-color: rgb(0 0 0);
            --tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);
            --tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);
            box-shadow: var(--tw-ring-offset-shadow), var(--tw-ring-shadow), var(--tw-shadow, 0 0 #0000);
            border-color: #000000;
        }
        
        /* Custom hover scale effect */
        .hover-scale:hover {
            transform: scale(1.02);
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #000000;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 8px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none;
        }

        /* Debug info */
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 12px;
            direction: ltr;
            text-align: left;
        }

        /* Success message */
        .success-message {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            color: #155724;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            text-align: center;
        }
    </style>
</head>
<body class="bg-app text-app min-h-screen flex items-center justify-center p-4">
    <div class="w-full max-w-2xl">
        <!-- Information Alert -->
        <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6 text-center">
            <p class="text-yellow-800 font-medium">
                ğŸ“¢ Ú©Ø§Ø±Ø¨Ø± Ù…Ø­ØªØ±Ù…ØŒ Ù‡Ø± Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ùˆ Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…Ø¬Ø§Ø² Ø¨Ù‡ Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø§Ø³Øª. Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§ Ø¯Ù‚Øª Ø«Ø¨Øª Ú©Ù†ÛŒØ¯.
            </p>
        </div>
        
        <div class="bg-white border-app border rounded-2xl shadow-md p-8">
            <!-- Header Section -->
            <div class="text-center mb-8">
                <h1 class="text-3xl md:text-4xl font-bold mb-4">ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ø¯Ù…ÛŒÙ†ÛŒ</h1>
                <p class="en-text text-2xl mb-4">Erika Khosravi</p>
                <div class="flex justify-center">
                    <div class="w-6 h-1 bg-black rounded-full"></div>
                </div>
            </div>
            
            <!-- Login Form -->
            <form id="loginForm" class="space-y-6">
                <!-- Full Name Field -->
                <div>
                    <label for="fullName" class="block text-right mb-2 font-medium">Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ</label>
                    <input 
                        type="text" 
                        id="fullName" 
                        name="fullName" 
                        class="w-full p-3 border-app border rounded-lg bg-input focus:ring-2 focus:ring-black focus:border-black" 
                        placeholder="Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯"
                        required
                        minlength="4"
                    >
                </div>
                
                <!-- Phone Number Field -->
                <div>
                    <label for="phone" class="block text-right mb-2 font-medium">Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù‡Ù…Ø±Ø§Ù‡</label>
                    <input 
                        type="tel" 
                        id="phone" 
                        name="phone" 
                        class="w-full p-3 border-app border rounded-lg bg-input focus:ring-2 focus:ring-black focus:border-black" 
                        placeholder="09123456789"
                        pattern="09[0-9]{9}"
                        required
                    >
                    <p class="text-xs text-gray-500 mt-1">Ù…Ø«Ø§Ù„: 09123456789</p>
                </div>
                
                <!-- Telegram ID Field -->
                <div class="relative">
                    <label for="telegram" class="block text-right mb-2 font-medium">Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… (Ø¨Ø¯ÙˆÙ† @)</label>
                    <div class="relative">
                        <input 
                            type="text" 
                            id="telegram" 
                            name="telegram" 
                            class="w-full p-3 pr-3 pl-10 border-app border rounded-lg bg-input focus:ring-2 focus:ring-black focus:border-black" 
                            placeholder="username"
                            required
                            minlength="3"
                        >
                        <span class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500">@</span>
                    </div>
                    <p class="text-xs text-gray-500 mt-1">Ù…Ø«Ø§Ù„: erika_khosravi</p>
                </div>
                
                <!-- Submit Button -->
                <button 
                    type="submit" 
                    id="submit-btn"
                    class="btn-primary w-full py-3 rounded-lg font-bold shadow-md transition-all duration-200 hover-scale flex items-center justify-center"
                >
                    <span id="submit-text">ÙˆØ±ÙˆØ¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†</span>
                    <div id="submit-spinner" class="spinner hidden"></div>
                </button>
            </form>

            <!-- Success Message -->
            <div id="success-message" class="success-message hidden">
                âœ… Ø«Ø¨Øªâ€ŒÙ†Ø§Ù… Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯! Ø¯Ø± Ø­Ø§Ù„ Ø§Ù†ØªÙ‚Ø§Ù„ Ø¨Ù‡ ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ†...
            </div>

            <!-- Debug Information -->
            <div id="debug-info" class="debug-info hidden">
                <strong>Debug Information:</strong>
                <div id="debug-content"></div>
            </div>

            <!-- Quick Fix Instructions -->
            <div id="fix-instructions" class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6 text-sm hidden">
                <strong>ğŸ’¡ Ø±Ø§Ù‡ Ø­Ù„ Ø³Ø±ÛŒØ¹:</strong>
                <p>Ø¨Ø±Ø§ÛŒ Ø±ÙØ¹ Ø§ÛŒÙ† Ø®Ø·Ø§ØŒ Ù„Ø·ÙØ§Ù‹ Ø¨Ù‡ Ù¾Ù†Ù„ Supabase Ø¨Ø±ÙˆÛŒØ¯ Ùˆ:</p>
                <ol class="list-decimal list-inside mt-2 space-y-1">
                    <li>Ø¨Ù‡ <strong>Table Editor</strong> Ø¨Ø±ÙˆÛŒØ¯</li>
                    <li>Ø¬Ø¯ÙˆÙ„ <strong>users</strong> Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯</li>
                    <li>Ø¨Ù‡ ØªØ¨ <strong>Permissions</strong> Ø¨Ø±ÙˆÛŒØ¯</li>
                    <li><strong>Enable RLS</strong> Ø±Ø§ ØºÛŒØ±ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Supabase configuration
        const supabaseUrl = 'https://zuxnwivvhdknrsnelcio.supabase.co';
        const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp1eG53aXZ2aGRrbnJzbmVsY2lvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwOTk4MjUsImV4cCI6MjA3ODY3NTgyNX0.WxyqhPYudUH_yP_5RyiYhcVeF2_dp30SDg96Ost4Xp4';
        
        // Ø§ÛŒØ¬Ø§Ø¯ Supabase client
        const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¯ÛŒØ¨Ø§Ú¯
        function showDebugInfo(info) {
            const debugDiv = document.getElementById('debug-info');
            const debugContent = document.getElementById('debug-content');
            debugContent.innerHTML = info;
            debugDiv.classList.remove('hidden');
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒÛŒ Ø±ÙØ¹ Ø®Ø·Ø§
        function showFixInstructions() {
            document.getElementById('fix-instructions').classList.remove('hidden');
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ù…ÙˆÙÙ‚ÛŒØª
        function showSuccessMessage() {
            document.getElementById('success-message').classList.remove('hidden');
        }

        document.addEventListener('DOMContentLoaded', function() {
            const loginForm = document.getElementById('loginForm');
            const phoneInput = document.getElementById('phone');
            const submitBtn = document.getElementById('submit-btn');
            const submitText = document.getElementById('submit-text');
            const submitSpinner = document.getElementById('submit-spinner');
            
            // ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase
            async function testConnection() {
                try {
                    showDebugInfo('ğŸ”— ØªØ³Øª Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase...');
                    
                    const { data, error } = await supabase
                        .from('users')
                        .select('count')
                        .limit(1);
                    
                    if (error) {
                        showDebugInfo(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø§ØªØµØ§Ù„: ${error.message}<br>
                        ğŸ“ Ú©Ø¯ Ø®Ø·Ø§: ${error.code}<br>
                        ğŸ” Ù…Ø´Ú©Ù„: RLS ÙØ¹Ø§Ù„ Ø§Ø³Øª Ø§Ù…Ø§ Ù¾Ø§Ù„ÛŒØ³ÛŒâ€ŒÙ‡Ø§ ØªÙ†Ø¸ÛŒÙ… Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯`);
                        showFixInstructions();
                        return false;
                    } else {
                        showDebugInfo('âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Supabase Ù…ÙˆÙÙ‚ÛŒØªâ€ŒØ¢Ù…ÛŒØ² Ø¨ÙˆØ¯');
                        return true;
                    }
                } catch (err) {
                    showDebugInfo(`âŒ Ø®Ø·Ø§ÛŒ ØºÛŒØ±Ù…Ù†ØªØ¸Ø±Ù‡: ${err.message}`);
                    return false;
                }
            }

            // Phone number formatting
            phoneInput.addEventListener('input', function(e) {
                let value = e.target.value.replace(/\D/g, '');
                
                if (value.length > 0 && value[0] === '9') {
                    value = '0' + value;
                }
                
                if (value.length > 11) {
                    value = value.substring(0, 11);
                }
                
                e.target.value = value;
            });
            
            // Form validation and submission
            loginForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const fullName = document.getElementById('fullName').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const telegram = document.getElementById('telegram').value.trim();
                
                // Validation
                if (fullName.length < 4) {
                    alert('Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û´ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯.');
                    return;
                }
                
                if (!phone.startsWith('09') || phone.length !== 11) {
                    alert('Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ 09 Ø´Ø±ÙˆØ¹ Ø´Ø¯Ù‡ Ùˆ 11 Ø±Ù‚Ù… Ø¨Ø§Ø´Ø¯.');
                    return;
                }
                
                if (telegram.length < 3 || telegram.includes(' ')) {
                    alert('Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§ÛŒØ¯ Ø­Ø¯Ø§Ù‚Ù„ Û³ Ú©Ø§Ø±Ø§Ú©ØªØ± Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ Ùˆ Ø¨Ø¯ÙˆÙ† ÙØ§ØµÙ„Ù‡ Ø¨Ø§Ø´Ø¯.');
                    return;
                }
                
                // Show loading state
                submitBtn.disabled = true;
                submitText.textContent = 'Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ...';
                submitSpinner.classList.remove('hidden');

                // ØªØ³Øª Ø§ØªØµØ§Ù„ Ù‚Ø¨Ù„ Ø§Ø² Ø«Ø¨Øªâ€ŒÙ†Ø§Ù…
                const isConnected = await testConnection();
                if (!isConnected) {
                    submitBtn.disabled = false;
                    submitText.textContent = 'ÙˆØ±ÙˆØ¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†';
                    submitSpinner.classList.add('hidden');
                    return;
                }
                
                try {
                    showDebugInfo('ğŸ” Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØªÚ©Ø±Ø§Ø±ÛŒ...');

                    // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ú©Ø§Ø±Ø¨Ø± ØªÚ©Ø±Ø§Ø±ÛŒ Ø¯Ø± Supabase
                    const { data: existingUsers, error: checkError } = await supabase
                        .from('users')
                        .select('*')
                        .or(`phone.eq.${phone},telegram.eq.${telegram}`);

                    if (checkError) {
                        showDebugInfo(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†: ${checkError.message}`);
                        throw new Error(`Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø±Ø±Ø³ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª: ${checkError.message}`);
                    }

                    showDebugInfo(`âœ… Ø¨Ø±Ø±Ø³ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ Ù‡Ø§ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯. ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÛŒØ§ÙØª Ø´Ø¯Ù‡: ${existingUsers?.length || 0}`);

                    if (existingUsers && existingUsers.length > 0) {
                        const existingPhone = existingUsers.find(user => user.phone === phone);
                        const existingTelegram = existingUsers.find(user => user.telegram === telegram);
                        
                        if (existingPhone) {
                            alert('Ø§ÛŒÙ† Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ† Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù‡Ø± Ø´Ù…Ø§Ø±Ù‡ ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ø´Ø±Ú©Øª Ú©Ù†Ø¯.');
                            return;
                        }
                        
                        if (existingTelegram) {
                            alert('Ø§ÛŒÙ† Ø¢ÛŒØ¯ÛŒ ØªÙ„Ú¯Ø±Ø§Ù… Ù‚Ø¨Ù„Ø§Ù‹ Ø«Ø¨Øª Ø´Ø¯Ù‡ Ø§Ø³Øª. Ù‡Ø± Ø¢ÛŒØ¯ÛŒ ÙÙ‚Ø· ÛŒÚ© Ø¨Ø§Ø± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¯Ø± Ø¢Ø²Ù…ÙˆÙ† Ø´Ø±Ú©Øª Ú©Ù†Ø¯.');
                            return;
                        }
                    }

                    // Ø¯Ø±ÛŒØ§ÙØª IP Ú©Ø§Ø±Ø¨Ø±
                    const ip = await getIPAddress();
                    showDebugInfo(`ğŸŒ IP Ú©Ø§Ø±Ø¨Ø±: ${ip}`);

                    // Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Supabase
                    showDebugInfo('ğŸ’¾ Ø¯Ø± Ø­Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¯Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³...');
                    
                    const userData = {
                        full_name: fullName,
                        phone: phone,
                        telegram: telegram,
                        ip_address: ip,
                        registered_at: new Date().toISOString()
                    };

                    const { data: newUser, error: insertError } = await supabase
                        .from('users')
                        .insert([userData])
                        .select()
                        .single();

                    if (insertError) {
                        showDebugInfo(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ú©Ø§Ø±Ø¨Ø±: ${insertError.message}`);
                        showFixInstructions();
                        throw new Error(`Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª: ${insertError.message}`);
                    }

                    showDebugInfo(`âœ… Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø«Ø¨Øª Ø´Ø¯. ID: ${newUser.id}`);
                    showSuccessMessage();

                    // Ø°Ø®ÛŒØ±Ù‡ Ø¯Ø± localStorage Ø¨Ø±Ø§ÛŒ Ù…Ø¯ÛŒØ±ÛŒØª session
                    localStorage.setItem('exam_user', JSON.stringify({
                        id: newUser.id,
                        fullName: newUser.full_name,
                        phone: newUser.phone,
                        telegram: newUser.telegram
                    }));

                    // Ù‡Ø¯Ø§ÛŒØª Ø¨Ù‡ ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† Ø¨Ø¹Ø¯ Ø§Ø² 2 Ø«Ø§Ù†ÛŒÙ‡
                    setTimeout(() => {
                        window.location.href = 'exam.html';
                    }, 2000);
                    
                } catch (error) {
                    console.error('Error:', error);
                    showDebugInfo(`âŒ Ø®Ø·Ø§ÛŒ Ù†Ù‡Ø§ÛŒÛŒ: ${error.message}`);
                    alert('Ø®Ø·Ø§ Ø¯Ø± Ø«Ø¨Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª. Ù„Ø·ÙØ§Ù‹ Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ø±ÙØ¹ Ø®Ø·Ø§ Ø±Ø§ Ø¯Ø± Ù¾Ø§ÛŒÛŒÙ† ØµÙØ­Ù‡ Ù…Ø·Ø§Ù„Ø¹Ù‡ Ú©Ù†ÛŒØ¯.');
                } finally {
                    // Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø¯Ú©Ù…Ù‡
                    submitBtn.disabled = false;
                    submitText.textContent = 'ÙˆØ±ÙˆØ¯ Ùˆ Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†';
                    submitSpinner.classList.add('hidden');
                }
            });
            
            // ØªØ§Ø¨Ø¹ Ø¯Ø±ÛŒØ§ÙØª IP Ú©Ø§Ø±Ø¨Ø±
            async function getIPAddress() {
                try {
                    const response = await fetch('https://api.ipify.org?format=json');
                    const data = await response.json();
                    return data.ip;
                } catch (error) {
                    console.error('Ø®Ø·Ø§ Ø¯Ø± Ø¯Ø±ÛŒØ§ÙØª IP:', error);
                    return 'unknown';
                }
            }

            // Ø§Ø¬Ø±Ø§ÛŒ ØªØ³Øª Ø§ØªØµØ§Ù„ Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡
            testConnection();
        });
    </script>
</body>
</html>
